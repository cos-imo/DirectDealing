Table User:
    User_id (Primary Key)
    First_Name
    Last_Name
    Mail
    Password
    Photo_profil
    Wallet

Table Event:
    Event_id (Primary Key)
    type
    Name
    preteur_id (Foreign Key -> User)
    acheteur_id (Foreign Key -> User)
    Recurrence
    Localisation
    Duree
    Couleur
    Prix_id (Foreign Key -> Florain)

Table Avis:
    Avis_id (Primary Key)
    Note
    Commentaire
    Auteur_id (Foreign Key -> User)
    Receveur_id (Foreign Key -> User)
    Date

Table Message:
    Message_id (Primary Key)
    Event_lie_id (Foreign Key -> Event)
    Sender_id (Foreign Key -> User)
    Receiver_id (Foreign Key -> User)
    Contenu


--------------- CODE POUR CREATION DE LA BASE ---------------

-- USER --

CREATE TABLE User (
    User_id INTEGER PRIMARY KEY AUTOINCREMENT,
    First_Name TEXT NOT NULL,
    Last_Name TEXT NOT NULL,
    Mail TEXT NOT NULL,
    Password TEXT NOT NULL,
    Photo_profil BLOB DEFAULT "/Users/gabrieldecave/Telecom/2A/PCD/CodingWeek/codingweek-24/src/main/resources/eu/telecomnancy/labfx/images/avatar_default.avif", -- Assumption: Image data is stored as BLOB
    Wallet INTEGER DEFAULT 0,
    Note INTEGER
);

-- RESSOURCE --

CREATE TABLE Ressource (
    Ressource_id INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL,
    Desc TEXT NOT NULL,
    DateDebut DATE NOT NULL,
    DateFin DATE NOT NULL,
    Localisation (float,float) NOT NULL,
    type INTEGER NOT NULL, -- Assumption: 0 = service, 1 = prêt
    Prix INTEGER NOT NULL
)
-- EVENT --

CREATE TABLE Event (
    Event_id INTEGER PRIMARY KEY AUTOINCREMENT,
    type INTEGER NOT NULL, -- Assumption: 0 = prêt service, 1 = prêt objet, 2 = emprunt service, 3 = emprunt objet
    Name TEXT NOT NULL,
    preteur_id INTEGER REFERENCES User(User_id) NOT NULL,
    acheteur_id INTEGER REFERENCES User(User_id),
    Recurrence INTEGER NOT NULL, -- Assumption: 0 = non, 1 = quotidien, 2 = mensuel, 3 = hebdomadaire
    DateDebut DATE NOT NULL,
    DateFin DATE NOT NULL,
    Prix INTEGER NOT NULL
);

-- MESSAGE -- 

CREATE TABLE Message (
    Message_id INTEGER PRIMARY KEY AUTOINCREMENT,
    Event_lie_id INTEGER REFERENCES Event(Event_id) NOT NULL,
    Sender_id INTEGER REFERENCES User(User_id) NOT NULL,
    Receiver_id INTEGER REFERENCES User(User_id) NOT NULL,
    Contenu TEXT NOT NULL
);

--------------- CODE POUR RESET LA BASE ---------------

DROP TABLE IF EXISTS User;
DROP TABLE IF EXISTS Ressource;
DROP TABLE IF EXISTS Event;
DROP TABLE IF EXISTS Message;
